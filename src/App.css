/* App.css */
/* ===========================
   0) Global scale & base type
   =========================== */
:root {
  --ui-scale: 1.125; /* 1.0 = 16px base; 1.125 â‰ˆ 18px */

  /* Right-pane audio dock sizing */
  --right-audioDock-h: 150px;   /* fixed height of audio controls area */
  --right-audioDock-pad: 10px;  /* outer padding around the audio panel */
  --right-audioDock-radius: 12px;

  /* Right-pane lyrics sizing */
  --right-lyrics-frac: 0.5;         /* 0.5 = 50% */
  --right-lyrics-min: 180px;        /* safety */
  --right-lyrics-max: 520px;        /* safety */

  /* Left-pane bottom controls sizing */
  --controls-collapsed-h: 56px;  /* header-only height (tweak) */
  --controls-open-h: 320px;      /* open height (tweak) */
}

/* Reset + font rendering */
*,
*::before,
*::after { box-sizing: border-box; }

html, body, #root {
  height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;

  font-size: calc(16px * var(--ui-scale));
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
    Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji");
  line-height: 1.25;

  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;

  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Help Safari compositing a bit */
html { backface-visibility: hidden; }

/* Headings & general text sizes (rem so they follow --ui-scale) */
h1 { font-size: 1.375rem; font-weight: 700; }
h2 { font-size: 1.25rem;  font-weight: 600; }
h3, .label { font-size: 1.125rem; font-weight: 600; }
p, span, button, input, select { font-size: 1rem; }

/* ===========================
   1) App frame
   =========================== */
.app-container {
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 100%;
  background: #ffffff;
  color: #000000;
}

/* Header/Footer */
.header, .footer {
  background: #929292;
  display: flex;
  align-items: center;
  justify-content: left;
  border-bottom: 1px solid #252b39;
}

.header {
  --header-font-size: 1.5rem;
  font-size: var(--header-font-size);
}

.header select {
  font: inherit;
  line-height: 1.1;
  padding: 1.25rem 1.5rem;
  color: #e9eef5;
  background: #0d0f12;
  border: 1px solid #252b39;
  border-radius: 6px;
}

.footer {
  border-bottom: 0;
  padding-top: 15px;
  border-top: 1px solid #252b39;
}

/* ===========================
   2) Main split (L/R)
   =========================== */
.main-content {
  flex: 1;
  display: flex;
  width: 100%;
  min-height: 0; /* allow flex children to shrink/scroll */
  min-width: 0;
}

/* ===========================
   3) Left pane: tapestry + bottom controls
   =========================== */
.left-pane {
  flex: 5 1 0;
  position: relative;

  /* Tapestry fills, controls dock at bottom */
  display: grid;
  grid-template-rows: minmax(0, 1fr) auto;
  gap: 0;

  min-width: 0;
  min-height: 0;

  border-right: 1px solid #252b39;
  background: #ffffff;
  color: #000000;

  /* Keep bottom-pane from visually spilling beneath footer */
  overflow: hidden;
}

/* Ensure the tapestry area stays contained (row 1) */
.left-pane > :first-child {
  min-width: 0;
  min-height: 0;
  overflow: hidden;
}

/* Bottom-pane: two equal-width menus, docked at bottom (row 2)
   IMPORTANT: no visible container background, no padding, no gaps.
   Visibility should come ONLY from the menus themselves. */
.bottom-pane {
  grid-row: 2;
  display: grid;
  grid-template-columns: 1fr 1fr;
  align-items: stretch;
  justify-items: stretch;

  gap: 0;
  padding: 0;

  background: transparent; /* no container visibility */
  border: 0;
  box-shadow: none;

  overflow: visible; /* allow tooltips */
  min-width: 0;

  /* open-state height baseline (panels decide whether to fill it) */
  height: var(--controls-open-h);
  min-height: 0;
}

/* Do NOT force children to 100% height;
   children decide: collapsed = fixed height, expanded = 100% */
.bottom-pane > * {
  min-width: 0;
  min-height: 0;
  align-self: end;   /* sit on bottom edge of the bottom-pane */
  justify-self: stretch;
}

/* ===========================
   4) Right pane: outer scroll + nested lyrics scroll + fixed audio dock
   =========================== */
.right-pane {
  position: relative;
  flex: 3 1 0;
  min-width: 0;
  min-height: 0;
  background: #ffffff;
  color: #000000;

  overflow: hidden; /* keeps dock overlay tidy */
}

/* Outer scroll container (prevents anchors expansion from breaking layout) */
.right-pane-scroll {
  height: 100%;
  width: 100%;
  min-width: 0;
  min-height: 0;

  overflow-y: auto;
  overflow-x: hidden;

  /* ensures content isn't hidden underneath the dock */
  padding-bottom: calc(var(--right-audioDock-h) + var(--right-audioDock-pad));
  box-sizing: border-box;

  display: flex;
  flex-direction: column;
}

/* Base section */
.right-pane-section {
  width: 100%;
  min-width: 0;
  box-sizing: border-box;
}

/* Optional spacing between blocks */
.right-pane-section + .right-pane-section {
  margin-top: 10px;
}

/* Presets: give buttons enough room */
.right-pane-section.presets {
  max-height: none;
  min-height: 65px;
  padding: 6px 10px;
  box-sizing: border-box;
  flex: 0 0 auto;
}

/* Lyrics: fixed-ish size + nested scroll */
.right-pane-section.lyrics {
  flex: 0 0 auto;
  height: clamp(
    var(--right-lyrics-min),
    calc((100% - 0px) * var(--right-lyrics-frac)),
    var(--right-lyrics-max)
  );
  min-height: 0;
}

/* Lyrics inner becomes the nested scroller */
.lyrics-inner {
  height: 100%;
  min-height: 0;
  overflow-y: auto;
  overflow-x: hidden;
}

/* Anchors: allowed to grow; if too big, outer scroller takes over */
.right-pane-section.anchors-stack {
  flex: 0 0 auto;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: 0;
  min-width: 0;
  min-height: 0;
}

/* Fixed audio dock overlay */
.right-pane-audioDock {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;

  height: var(--right-audioDock-h);
  padding: var(--right-audioDock-pad);
  box-sizing: border-box;

  z-index: 50;
  pointer-events: auto;

  /* backplate so scroller doesn't show through gutters */
  background: #ffffff;
  border-top: 10px solid #ffffff;
}

.right-pane-audioDock > * {
  width: 100%;
  height: 100%;
  min-width: 0;
  min-height: 0;

  border-radius: var(--right-audioDock-radius);
  overflow: hidden;
}

.right-pane-audioDock .audio-controls-panel {
  width: 100%;
  height: 100%;
  border-radius: var(--right-audioDock-radius);
  box-shadow:
    0 -6px 18px rgba(0, 0, 0, 0.25),
    0 -2px 6px rgba(0, 0, 0, 0.15);
}

.right-pane-audioDock::before {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  top: -20px;
  height: 20px;
  pointer-events: none;

  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0),
    rgba(255, 255, 255, 1)
  );
}

/* ===========================
   5) Optional color blocks
   =========================== */
.audio   { background: #1a2030; color: #ffffff; }
.channel { background: #111624; color: #ffffff; } /* keep if used elsewhere */
.lyrics  { background: #0b0f1a; color: #ffffff; }

/* ===========================
   6) Utilities / text layout
   =========================== */
.word { display: inline-block; line-height: 1.15; }
